Subject: [PATCH] Update aes-gcm-siv to solve zeroize compatibility
---
Index: Cargo.lock
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Cargo.lock b/Cargo.lock
--- a/Cargo.lock	(revision 38e15cc36081a83ef38bd7f53df5ec39eb439500)
+++ b/Cargo.lock	(revision e30bd3d97bf84ffeb1b0eeaf0425f33c70f450d8)
@@ -27,6 +27,16 @@
  "generic-array 0.14.5",
 ]

+[[package]]
+name = "aead"
+version = "0.5.2"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "d122413f284cf2d62fb1b7db97e02edb8cda96d769b16e443a4f6195e35662b0"
+dependencies = [
+ "crypto-common",
+ "generic-array 0.14.5",
+]
+
 [[package]]
 name = "aes"
 version = "0.7.5"
@@ -39,17 +49,43 @@
  "opaque-debug 0.3.0",
 ]

+[[package]]
+name = "aes"
+version = "0.8.3"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "ac1f845298e95f983ff1944b728ae08b8cebab80d684f0a832ed0fc74dfa27e2"
+dependencies = [
+ "cfg-if 1.0.0",
+ "cipher 0.4.3",
+ "cpufeatures",
+]
+
 [[package]]
 name = "aes-gcm-siv"
 version = "0.10.3"
 source = "registry+https://github.com/rust-lang/crates.io-index"
 checksum = "589c637f0e68c877bbd59a4599bbe849cac8e5f3e4b5a3ebae8f528cd218dcdc"
 dependencies = [
- "aead",
- "aes",
+ "aead 0.4.3",
+ "aes 0.7.5",
  "cipher 0.3.0",
- "ctr",
- "polyval",
+ "ctr 0.8.0",
+ "polyval 0.5.3",
+ "subtle",
+ "zeroize",
+]
+
+[[package]]
+name = "aes-gcm-siv"
+version = "0.11.1"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "ae0784134ba9375416d469ec31e7c5f9fa94405049cf08c5ce5b4698be673e0d"
+dependencies = [
+ "aead 0.5.2",
+ "aes 0.8.3",
+ "cipher 0.4.3",
+ "ctr 0.9.2",
+ "polyval 0.6.1",
  "subtle",
  "zeroize",
 ]
@@ -1025,11 +1061,12 @@

 [[package]]
 name = "crypto-common"
-version = "0.1.3"
+version = "0.1.6"
 source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "57952ca27b5e3606ff4dd79b0020231aaf9d6aa76dc05fd30137538c50bd3ce8"
+checksum = "1bfb12502f3fc46cca1bb51ac28df9d618d813cdc3d2f25b9fe775a34af26bb3"
 dependencies = [
  "generic-array 0.14.5",
+ "rand_core 0.6.3",
  "typenum",
 ]

@@ -1074,6 +1111,15 @@
  "cipher 0.3.0",
 ]

+[[package]]
+name = "ctr"
+version = "0.9.2"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "0369ee1ad671834580515889b80f2ea915f23b8be8d0daa4bbaf2ac5c7590835"
+dependencies = [
+ "cipher 0.4.3",
+]
+
 [[package]]
 name = "ctrlc"
 version = "3.2.2"
@@ -3257,7 +3303,19 @@
  "cfg-if 1.0.0",
  "cpufeatures",
  "opaque-debug 0.3.0",
- "universal-hash",
+ "universal-hash 0.4.1",
+]
+
+[[package]]
+name = "polyval"
+version = "0.6.1"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "d52cff9d1d4dee5fe6d03729099f4a310a41179e0a10dbf542039873f2e826fb"
+dependencies = [
+ "cfg-if 1.0.0",
+ "cpufeatures",
+ "opaque-debug 0.3.0",
+ "universal-hash 0.5.1",
 ]

 [[package]]
@@ -6561,7 +6619,7 @@
 source = "registry+https://github.com/rust-lang/crates.io-index"
 checksum = "ac5982ab9d8771b3d9bbef11ece78348c496a9f70a90a96225aee0a70bd13b9d"
 dependencies = [
- "aes-gcm-siv",
+ "aes-gcm-siv 0.10.3",
  "arrayref",
  "base64 0.13.0",
  "bincode",
@@ -6590,7 +6648,7 @@
 name = "solana-zk-token-sdk"
 version = "1.14.13"
 dependencies = [
- "aes-gcm-siv",
+ "aes-gcm-siv 0.11.1",
  "arrayref",
  "base64 0.13.0",
  "bincode",
@@ -7571,6 +7629,16 @@
  "generic-array 0.14.5",
  "subtle",
 ]
+
+[[package]]
+name = "universal-hash"
+version = "0.5.1"
+source = "registry+https://github.com/rust-lang/crates.io-index"
+checksum = "fc1de2c688dc15305988b563c3854064043356019f97a4b46276fe734c4f07ea"
+dependencies = [
+ "crypto-common",
+ "subtle",
+]

 [[package]]
 name = "unix_socket2"
Index: zk-token-sdk/Cargo.toml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/zk-token-sdk/Cargo.toml b/zk-token-sdk/Cargo.toml
--- a/zk-token-sdk/Cargo.toml	(revision 38e15cc36081a83ef38bd7f53df5ec39eb439500)
+++ b/zk-token-sdk/Cargo.toml	(revision e30bd3d97bf84ffeb1b0eeaf0425f33c70f450d8)
@@ -15,7 +15,7 @@
 solana-program = { path = "../sdk/program", version = "=1.14.13" }

 [target.'cfg(not(target_os = "solana"))'.dependencies]
-aes-gcm-siv = "0.10.3"
+aes-gcm-siv = "0.11.1"
 arrayref = "0.3.6"
 bincode = "1"
 byteorder = "1"
Index: zk-token-sdk/src/encryption/auth_encryption.rs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/zk-token-sdk/src/encryption/auth_encryption.rs b/zk-token-sdk/src/encryption/auth_encryption.rs
--- a/zk-token-sdk/src/encryption/auth_encryption.rs	(revision 38e15cc36081a83ef38bd7f53df5ec39eb439500)
+++ b/zk-token-sdk/src/encryption/auth_encryption.rs	(revision e30bd3d97bf84ffeb1b0eeaf0425f33c70f450d8)
@@ -4,7 +4,7 @@
 #[cfg(not(target_os = "solana"))]
 use {
     aes_gcm_siv::{
-        aead::{Aead, NewAead},
+        aead::{Aead, KeyInit as NewAead},
         Aes128GcmSiv,
     },
     rand::{rngs::OsRng, CryptoRng, Rng, RngCore},
